<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Reddit Video Generator</title>
<script src="https://cdn.tailwindcss.com"></script>
<script src="https://www.youtube.com/iframe_api"></script>
<style>
body { background:#09090b; color:white; font-family:'Inter',sans-serif; }
.video-wrapper{ width:340px; height:600px; position:relative; border-radius:32px; overflow:hidden; background:black; margin-top:20px; }
#player{ position:absolute; top:50%; left:50%; transform:translate(-50%,-50%) scale(1.5); width:100%; height:100%; pointer-events:none; }
#subtitle-overlay{ position:absolute; inset:0; display:flex; align-items:center; justify-content:center; text-align:center; padding:20px; z-index:10; }
#subtitle-text{ font-size:2.4rem; text-transform:uppercase; text-shadow:0 4px 10px rgba(0,0,0,.8); }
.highlight{ color:#fbbf24; }
textarea{ width:100%; height:140px; background:#1f1f1f; color:white; border-radius:12px; padding:10px; border:none; resize:none; margin-bottom:10px; }
button{ width:100%; padding:12px; background:#f97316; color:white; font-weight:bold; border-radius:12px; cursor:pointer; }
button:hover{ background:#fb923c; }
.container{ max-width:400px; margin:auto; padding:20px; }
</style>
</head>
<body>
<div class="container">
    <h1 class="text-2xl font-black mb-4">REDDIT.GEN</h1>
    <textarea id="storyInput" placeholder="Paste your Reddit story / description here...">I found a weird glitch in Minecraft. Every time I placed a torch, it said I see you. I was alone. Then my door opened.</textarea>
    <button onclick="generateVideo()">GENERATE VIDEO</button>
</div>

<div class="video-wrapper">
    <div id="player"></div>
    <div id="subtitle-overlay">
        <div id="subtitle-text">READY</div>
    </div>
</div>

<script>
let player;
const subtitleDisplay = document.getElementById("subtitle-text");
const synth = window.speechSynthesis;

function onYouTubeIframeAPIReady(){
    player = new YT.Player("player",{
        videoId:"s600FYgI5-s",
        playerVars:{ autoplay:1, controls:0, mute:1, loop:1, playlist:"s600FYgI5-s" }
    });
}

function generateVideo(){
    const text = document.getElementById("storyInput").value.trim();
    if(!text){ alert("Type a story first ðŸ’”"); return; }

    synth.cancel();
    subtitleDisplay.innerHTML = "";

    const words = text.split(" ");
    let index = 0;

    const utterance = new SpeechSynthesisUtterance(text);
    utterance.rate = 1;

    utterance.onboundary = (e)=>{
        if(e.name === "word" && words[index]){
            if(index % 4 === 0){
                subtitleDisplay.innerHTML = `<span class="highlight">${words[index]}</span>`;
            } else {
                subtitleDisplay.innerHTML = words[index];
            }
            index++;
        }
    };

    utterance.onend = ()=>{ subtitleDisplay.innerHTML = "WATCH AGAIN"; };

    player.seekTo(0);
    player.playVideo();
    synth.speak(utterance);
}
</script>
</body>
</html>
