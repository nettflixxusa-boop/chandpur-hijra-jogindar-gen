<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Reddit Video Generator</title>

<script src="https://cdn.tailwindcss.com"></script>
<script src="https://www.youtube.com/iframe_api"></script>

<style>
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@900&display=swap');

body {
    background:#09090b;
    color:white;
    font-family:'Inter',sans-serif;
}

.video-wrapper{
    width:340px;
    height:600px;
    position:relative;
    border-radius:32px;
    overflow:hidden;
    background:black;
}

#player{
    position:absolute;
    top:50%;
    left:50%;
    transform:translate(-50%,-50%) scale(1.5);
    width:100%;
    height:100%;
    pointer-events:none;
}

#subtitle-overlay{
    position:absolute;
    inset:0;
    display:flex;
    align-items:center;
    justify-content:center;
    text-align:center;
    padding:30px;
    z-index:10;
}

#subtitle-text{
    font-size:2.6rem;
    line-height:1;
    text-transform:uppercase;
    text-shadow:0 4px 10px rgba(0,0,0,.8);
}

.highlight{
    color:#fbbf24;
}
</style>
</head>

<body class="flex flex-col lg:flex-row items-center justify-center min-h-screen gap-10 p-6">

<!-- LEFT PANEL -->
<div class="bg-zinc-900/80 p-6 rounded-3xl w-full max-w-md">
    <h1 class="text-2xl font-black mb-4">REDDIT.GEN</h1>

    <textarea id="storyInput"
        class="w-full h-56 bg-black border border-zinc-700 rounded-2xl p-4 mb-4"
        placeholder="Paste your Reddit story / description here...">
I found a weird glitch in Minecraft. Every time I placed a torch, it said I see you. I was alone. Then my door opened.
    </textarea>

    <button onclick="generateVideo()"
        class="w-full bg-orange-600 py-4 rounded-2xl font-black text-lg">
        GENERATE VIDEO
    </button>
</div>

<!-- VIDEO -->
<div class="video-wrapper border-4 border-zinc-800">
    <div id="player"></div>
    <div id="subtitle-overlay">
        <div id="subtitle-text">READY</div>
    </div>
</div>

<script>
let player;
const subtitleDisplay = document.getElementById("subtitle-text");
const synth = window.speechSynthesis;

function onYouTubeIframeAPIReady(){
    player = new YT.Player("player",{
        videoId:"s600FYgI5-s",
        playerVars:{
            autoplay:1,
            controls:0,
            mute:1,
            loop:1,
            playlist:"s600FYgI5-s"
        }
    });
}

function generateVideo(){
    const text = document.getElementById("storyInput").value.trim();
    if(!text){ alert("Type something first"); return; }

    synth.cancel();
    subtitleDisplay.innerHTML = "";

    const words = text.split(" ");
    let index = 0;

    const utterance = new SpeechSynthesisUtterance(text);
    utterance.rate = 1;

    utterance.onboundary = (e)=>{
        if(e.name === "word" && words[index]){
            if(index % 4 === 0){
                subtitleDisplay.innerHTML =
                  `<span class="highlight">${words[index]}</span>`;
            } else {
                subtitleDisplay.innerHTML = words[index];
            }
            index++;
        }
    };

    utterance.onend = ()=>{
        subtitleDisplay.innerHTML = "WATCH AGAIN";
    };

    player.seekTo(0);
    player.playVideo();
    synth.speak(utterance);
}
</script>

</body>
</html>
